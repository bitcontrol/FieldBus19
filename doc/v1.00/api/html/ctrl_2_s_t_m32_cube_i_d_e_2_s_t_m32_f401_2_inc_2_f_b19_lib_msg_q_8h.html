<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FieldBus19: ctrl/STM32CubeIDE/STM32F401/Inc/FB19LibMsgQ.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FieldBus19<span id="projectnumber">&#160;v1.00</span>
   </div>
   <div id="projectbrief">A lightweight open fieldbus system for STM32 controllers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">FB19LibMsgQ.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file publishes the interface of a FieldBus19 library that encapsulates a specific type of message queue.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_def_8h_source.html">FB19Def.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_msg_8h_source.html">FB19Msg.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for FB19LibMsgQ.h:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h__incl.png" border="0" usemap="#actrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h__dep__incl.png" border="0" usemap="#actrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8hdep" alt=""/></div>
</div>
</div>
<p><a href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_b19_lib_msg_q__element__struct.html">FB19LibMsgQ_element_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_f_b19_lib_msg_q__queue__struct.html">FB19LibMsgQ_queue_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a436d6f082a491ea2d9e524fcd9b3de9b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_f_b19_lib_msg_q__element__struct.html">FB19LibMsgQ_element_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a436d6f082a491ea2d9e524fcd9b3de9b">FB19LibMsgQ_element_t</a></td></tr>
<tr class="separator:a436d6f082a491ea2d9e524fcd9b3de9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a824025c23dc2eece4fbb126b33a6ef08"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_f_b19_lib_msg_q__queue__struct.html">FB19LibMsgQ_queue_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a></td></tr>
<tr class="separator:a824025c23dc2eece4fbb126b33a6ef08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a994ccbaa951324a8174fea965d747b6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a994ccbaa951324a8174fea965d747b6c">FB19LibMsgQ_init</a> (<a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a> queue)</td></tr>
<tr class="separator:a994ccbaa951324a8174fea965d747b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61f86a483d5aea2a7a2bec2b64383193"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a61f86a483d5aea2a7a2bec2b64383193">FB19LibMsgQ_read</a> (<a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a> queue, <a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_msg_8h.html#afa89bd818747be891ceba5148c1b5304">FB19Msg_t</a> *msg)</td></tr>
<tr class="separator:a61f86a483d5aea2a7a2bec2b64383193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d48bfb12b478a2616cecf362058766a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a7d48bfb12b478a2616cecf362058766a">FB19LibMsgQ_write</a> (<a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a> queue, const <a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_msg_8h.html#afa89bd818747be891ceba5148c1b5304">FB19Msg_t</a> *msg)</td></tr>
<tr class="separator:a7d48bfb12b478a2616cecf362058766a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file publishes the interface of a FieldBus19 library that encapsulates a specific type of message queue. </p>
<ul>
<li>Filename: FB19LibMsgQ.h</li>
<li>Platform(s): All</li>
<li>Project: FieldBus19</li>
<li>Created: May 19, 2022</li>
<li><p class="startli">Description: This file publishes the interface of a FieldBus19 library that encapsulates a specific type of message queue.</p>
<p class="startli">It is used by:</p><ul>
<li>Bus Controllers as 'low frequency readers queue' in the FB19DprCtrl module</li>
<li>Bus Subscribers as transmit queue in the FB19DrvSubs module It is basically a ring buffer that on write overwrites the oldest element when full and returns an error on read when empty.<br  />
 During a read call, the <code>msg</code> parameter is both an input and output parameter. It is initially an input parameter since the &lt;dstId&gt; and &lt;msgId&gt; fields in the object pointed to by <code>msg*</code> specify what message type shall be returned. A read returns an error if it specifies a message whose &lt;dstId&gt; AND &lt;msgId&gt; aren't found in the queue.<br  />
 Additionally, when the queue stores multiple messages with identical &lt;dstId&gt; and &lt;msgId&gt; fields, the oldest of those messages is returned on a read (and not simply the oldest message in the queue).<br  />
</li>
</ul>
</li>
<li>Notes: This module has been designed for multi-instance usage.<br  />
 That scenario comes into play when a Controller and one or more Subscribers are implemented in one single application. Examples are test applications or connected FB19 bus systems that exchange messages via a Bus Controller / Bus Subscriber application.<br  />
 For achieving multi-instance usage this module doesn't contain the message queue. It has to be passed at every function call instead. That way, the module is stateless and can be used by several clients simultaneously.</li>
<li>Author: Andreas Isenegger</li>
<li>Copyright: 2022-2023, Bitcontrol GmbH, Switzerland. All rights reserved. </li>
</ul>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a436d6f082a491ea2d9e524fcd9b3de9b" name="a436d6f082a491ea2d9e524fcd9b3de9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a436d6f082a491ea2d9e524fcd9b3de9b">&#9670;&nbsp;</a></span>FB19LibMsgQ_element_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_f_b19_lib_msg_q__element__struct.html">FB19LibMsgQ_element_struct</a> <a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a436d6f082a491ea2d9e524fcd9b3de9b">FB19LibMsgQ_element_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The message queue stores this type of data. </p>

</div>
</div>
<a id="a824025c23dc2eece4fbb126b33a6ef08" name="a824025c23dc2eece4fbb126b33a6ef08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a824025c23dc2eece4fbb126b33a6ef08">&#9670;&nbsp;</a></span>FB19LibMsgQ_queue_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_f_b19_lib_msg_q__queue__struct.html">FB19LibMsgQ_queue_struct</a> <a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This data type defines a message queue. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a994ccbaa951324a8174fea965d747b6c" name="a994ccbaa951324a8174fea965d747b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a994ccbaa951324a8174fea965d747b6c">&#9670;&nbsp;</a></span>FB19LibMsgQ_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FB19LibMsgQ_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initializes the elements of the passed queue.</p>
<p >Call it at least once before using a queue object. It clears the memory of the internal elements to <code>0</code>.<br  />
 Don't modify the passed <code>queue</code> object outside the <code>_read()</code> or <code>_write()</code> functions of this module!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>is the message queue that shall be initialized. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>R_SUCCESS</code> if the message queue could be initialized, <code>R_ERROR</code> otherwise. </dd></dl>

</div>
</div>
<a id="a61f86a483d5aea2a7a2bec2b64383193" name="a61f86a483d5aea2a7a2bec2b64383193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61f86a483d5aea2a7a2bec2b64383193">&#9670;&nbsp;</a></span>FB19LibMsgQ_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FB19LibMsgQ_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_msg_8h.html#afa89bd818747be891ceba5148c1b5304">FB19Msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Copies the oldest unread message that matches the destination address and message identifier of the message pointed to by the <code>msg</code> parameter from the queue into the passed message, thereby removing the message from the queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>is the message queue that shall be read from. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>msg points to the message that will hold the result when this function has returned successfully. If no matching message could be found the message <code>msg</code> points to won't be changed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>R_SUCCESS</code> if the parameter checks pass and an unread message that matches the identifiers in <code>msg-&gt;dscr</code> could be found, <code>R_ERROR</code> otherwise. </dd></dl>

</div>
</div>
<a id="a7d48bfb12b478a2616cecf362058766a" name="a7d48bfb12b478a2616cecf362058766a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d48bfb12b478a2616cecf362058766a">&#9670;&nbsp;</a></span>FB19LibMsgQ_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FB19LibMsgQ_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html#a824025c23dc2eece4fbb126b33a6ef08">FB19LibMsgQ_queue_t</a>&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_msg_8h.html#afa89bd818747be891ceba5148c1b5304">FB19Msg_t</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Copies the message pointed to by the <code>msg</code> parameter to the queue. If the queue is already full, the oldest message is overwritten.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">queue</td><td>is the message queue that shall be written to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>points to the message to be queued. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>R_SUCCESS</code> if the parameter checks pass, <code>R_ERROR</code> otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_263426dc267c7f7b8bc816493cda4bef.html">ctrl</a></li><li class="navelem"><a class="el" href="dir_e08ee0c78fbd1be63c2bcc40fb5312ac.html">STM32CubeIDE</a></li><li class="navelem"><a class="el" href="dir_1438c4c6edaba7be3afc30aef4e5d958.html">STM32F401</a></li><li class="navelem"><a class="el" href="dir_d07548e9826f024558f9ab5396810e37.html">Inc</a></li><li class="navelem"><a class="el" href="ctrl_2_s_t_m32_cube_i_d_e_2_s_t_m32_f401_2_inc_2_f_b19_lib_msg_q_8h.html">FB19LibMsgQ.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
